@inherits LatestEventDashboardBase

<div class="col-lg-12 col-md-6 mt-4 mb-4 margin-top">
    <div class="card-dashbord" style="background-color:#fff">
        <div class="card-dashbord-header p-0 position-relative mt-n4 mx-3 z-index-2 bg-transparent mb-4">
            <div class="row">
                <div class="col-lg-12 col-md-6">
                    <div class="card-dashbord-header shadow-dark border-radius-lg py-3 pe-1 height-card" style="background-color:#FCA834">
                        <div class="row">
                            <div class="col-lg-12 col-md-6">
                                <h5 class="mb-0  txt-size" style="color:#fff">
                                    <b>
                                        @AppData.LangResource[AppData.LanguageID, 539]
                                    </b>
                                </h5>
                                <hr class="dark horizontal" style="margin-top:0.2rem;">
                            </div>
                        </div>
                        @if (eventResults.Count() == 0)
                        {
                            <BSAlert Color="Color.Danger" IsDismissible="true">
                                <p class="text-center">
                                    This Event Number
                                    @(record.EventNumber)
                                    does not contain sub-event result information.
                                </p>
                            </BSAlert>
                        }
                        else
                        {
                            <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel" style="justify-content:center">

                                <ol class="carousel-indicators">
                                    @for (int i = 0; i < eventResults.Count; i++)
                                    {
                                        @if (i == 0)
                                        {
                                            <li data-target="#carouselExampleIndicators" data-slide-to="@i" class="active"></li>
                                        }
                                        else
                                        {
                                            <li data-target="#carouselExampleIndicators" data-slide-to="@i"></li>
                                        }
                                    }
                                </ol>
                                <div class="carousel-inner">
                                    @for (int i = 0; i < eventResults.Count; i++)
                                    {
                                        @if (i == 0)
                                        {
                                            <div class="carousel-item  active">
                                                <div class="row">
                                                    <div class="col-xl-8 col-md-6">
                                                        <p class="mt-2 text-wrap txt-size-content" style="height: 135px; color:#000; cursor:pointer;" @onclick="OnManageRe">
                                                            @AppData.LangResource[AppData.LanguageID, 540] &colon; @(recordProject.ProjectNumber != null ? recordProject.ProjectNumber:"-") &vert; @AppData.LangResource[AppData.LanguageID, 28] &colon; @record.EventNumber &vert; @AppData.LangResource[AppData.LanguageID, 29] &colon; @record.EventName &vert;
                                                            @AppData.LangResource[AppData.LanguageID, 31] &colon; @(AppData.recordEventTypes.Find(x => x.EventTypeID == record.EventType) != null ? AppData.recordEventTypes.Find(x => x.EventTypeID == record.EventType).EventTypeTHName:"-") &vert;
                                                            @AppData.LangResource[AppData.LanguageID, 30] &colon; (@(recordEventProvinces.Find(x => x.ProvinceID == record.ProvinceID) != null ? recordEventProvinces.Find(x => x.ProvinceID == record.ProvinceID).ProvinceENName:"-"),
                                                            @(recordEventDistricts.Find(x => x.DistrictID == record.DistrictID) != null ? recordEventDistricts.Find(x => x.DistrictID == record.DistrictID).DistrictENName:"-"),
                                                            @(subDistricts.Find(x => x.subDistrictID == record.SubDistrictID) != null ? subDistricts.Find(x => x.subDistrictID == record.SubDistrictID).subDistrictENName:"-"),
                                                            @(record.zipCode = Int32.Parse(subDistricts.Find(i => i.subDistrictID == this.record.SubDistrictID) != null ? subDistricts.Find(i => i.subDistrictID == this.record.SubDistrictID).subDistrictCode:"-")),
                                                            @(record.eventCreateDate.Value.Date.ToString("dd/MM/yyyy")))<br />
                                                            <div style="border: solid 1px; margin-bottom: 3px; margin-top: 3px;"></div>
                                                            @AppData.LangResource[AppData.LanguageID, 61] : @eventResults[i].eventResultInstrumentNumber &vert;
                                                            @AppData.LangResource[AppData.LanguageID, 443] : @eventResults[i].RadiationNuclide &vert;
                                                            @AppData.LangResource[AppData.LanguageID, 266] : @eventResults[i].result
                                                            @(AppData.instrumentUnits.Find(x => x.InstrumentUnitID == eventResults[i].eventResultUnit) != null ? AppData.instrumentUnits.Find(x => x.InstrumentUnitID == eventResults[i].eventResultUnit).InstrumentUnitName:"-") &vert;
                                                            @AppData.LangResource[AppData.LanguageID, 541] : @eventResults[i].Backgroud
                                                            @(AppData.instrumentUnits.Find(x => x.InstrumentUnitID == eventResults[i].BackgroudUnit) != null ? AppData.instrumentUnits.Find(x => x.InstrumentUnitID == eventResults[i].BackgroudUnit).InstrumentUnitName:"-") &vert;
                                                            @AppData.LangResource[AppData.LanguageID, 542] : @eventResults[i].MeterDistance
                                                            @(AppData.instrumentUnits.Find(x => x.InstrumentUnitID == eventResults[i].MeterDistanceUnit) != null ? AppData.instrumentUnits.Find(x => x.InstrumentUnitID == eventResults[i].MeterDistanceUnit).InstrumentUnitName:"-") &vert;
                                                            @AppData.LangResource[AppData.LanguageID, 543] : @eventResults[i].FeetDistance
                                                            @(AppData.instrumentUnits.Find(x => x.InstrumentUnitID == eventResults[i].FeetDistanceUnit) != null ? AppData.instrumentUnits.Find(x => x.InstrumentUnitID == eventResults[i].FeetDistanceUnit).InstrumentUnitName:"-") &vert;
                                                            @AppData.LangResource[AppData.LanguageID, 544] : @eventResults[i].DoseAccumulation
                                                            @(AppData.recordEventUnits.Find(x => x.RecordEventUnitID == eventResults[i].DoseAccumulationUnit) != null ? AppData.recordEventUnits.Find(x => x.RecordEventUnitID == eventResults[i].DoseAccumulationUnit).RecordEventUnitName:"-") &vert;
                                                            @AppData.LangResource[AppData.LanguageID, 573] : @eventResults[i].Hour &vert;
                                                            @AppData.LangResource[AppData.LanguageID, 194] : @eventResults[i].eventResultDescription
                                                        </p>
                                                    </div>
                                                    <div class="col-xl-4 col-md-6 image-margin">
                                                        <!--img class="img-size" src="@("data:image/png;base64,"+eventResults[i].eventResultImageFile+"")" /--->
                                                        @if (!string.IsNullOrEmpty(eventResults[i].eventResultImageData))
                                                        {
                                                            <a href="@($"{config["nurl"]}{config["nurlFileRecordEvent"]}{eventResults[i].eventResultImageData}")" data-lightbox="gallery" data-title="@AppData.LangResource[AppData.LanguageID, 296]">
                                                                <img class="img-size" loading="lazy" src="@($"{config["nurl"]}{config["nurlFileRecordEvent"]}{eventResults[i].eventResultImageData}")" >
                                                            </a>
                                                        }
                                                        
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                        else
                                        {
                                            <div class="carousel-item">
                                                <div class="row">
                                                    <div class="col-lg-8 col-md-6">
                                                        <p class="mt-2 text-wrap txt-size-content-next" style="height: 135px; color:#000; cursor:pointer;" @onclick="OnManageRe">
                                                            @AppData.LangResource[AppData.LanguageID, 540] &colon; @(recordProject.ProjectNumber != null ? recordProject.ProjectNumber:"-") &vert; @AppData.LangResource[AppData.LanguageID, 28] &colon; @record.EventNumber &vert; @AppData.LangResource[AppData.LanguageID, 29] &colon; @record.EventName &vert;
                                                            @AppData.LangResource[AppData.LanguageID, 31] &colon; @(AppData.recordEventTypes.Find(x => x.EventTypeID == record.EventType) != null ? AppData.recordEventTypes.Find(x => x.EventTypeID == record.EventType).EventTypeTHName:"-") &vert;
                                                            @AppData.LangResource[AppData.LanguageID, 30] &colon; (@(recordEventProvinces.Find(x => x.ProvinceID == record.ProvinceID) != null ? recordEventProvinces.Find(x => x.ProvinceID == record.ProvinceID).ProvinceENName:"-"),
                                                            @(recordEventDistricts.Find(x => x.DistrictID == record.DistrictID) != null ? recordEventDistricts.Find(x => x.DistrictID == record.DistrictID).DistrictENName:"-"),
                                                            @(subDistricts.Find(x => x.subDistrictID == record.SubDistrictID) != null ? subDistricts.Find(x => x.subDistrictID == record.SubDistrictID).subDistrictENName:"-"),
                                                            @(record.zipCode = Int32.Parse(subDistricts.Find(i => i.subDistrictID == this.record.SubDistrictID) != null ? subDistricts.Find(i => i.subDistrictID == this.record.SubDistrictID).subDistrictCode:"-")),
                                                            @(record.eventCreateDate.Value.Date.ToString("dd/MM/yyyy")))<br />
                                                            <div style="border: solid 1px; margin-bottom: 3px; margin-top: 3px;"></div>
                                                            @AppData.LangResource[AppData.LanguageID, 61] : @eventResults[i].eventResultInstrumentNumber &vert;
                                                            @AppData.LangResource[AppData.LanguageID, 443] : @eventResults[i].RadiationNuclide &vert;
                                                            @AppData.LangResource[AppData.LanguageID, 266] : @eventResults[i].result
                                                            @(AppData.instrumentUnits.Find(x => x.InstrumentUnitID == eventResults[i].eventResultUnit) != null ? AppData.instrumentUnits.Find(x => x.InstrumentUnitID == eventResults[i].eventResultUnit).InstrumentUnitName:"-") &vert;
                                                            @AppData.LangResource[AppData.LanguageID, 541] : @eventResults[i].Backgroud
                                                            @(AppData.instrumentUnits.Find(x => x.InstrumentUnitID == eventResults[i].BackgroudUnit) != null ? AppData.instrumentUnits.Find(x => x.InstrumentUnitID == eventResults[i].BackgroudUnit).InstrumentUnitName:"-") &vert;
                                                            @AppData.LangResource[AppData.LanguageID, 542] : @eventResults[i].MeterDistance
                                                            @(AppData.instrumentUnits.Find(x => x.InstrumentUnitID == eventResults[i].MeterDistanceUnit) != null ? AppData.instrumentUnits.Find(x => x.InstrumentUnitID == eventResults[i].MeterDistanceUnit).InstrumentUnitName:"-") &vert;
                                                            @AppData.LangResource[AppData.LanguageID, 543] : @eventResults[i].FeetDistance
                                                            @(AppData.instrumentUnits.Find(x => x.InstrumentUnitID == eventResults[i].FeetDistanceUnit) != null ? AppData.instrumentUnits.Find(x => x.InstrumentUnitID == eventResults[i].FeetDistanceUnit).InstrumentUnitName:"-") &vert;
                                                            @AppData.LangResource[AppData.LanguageID, 544] : @eventResults[i].DoseAccumulation
                                                            @(AppData.recordEventUnits.Find(x => x.RecordEventUnitID == eventResults[i].DoseAccumulationUnit) != null ? AppData.recordEventUnits.Find(x => x.RecordEventUnitID == eventResults[i].DoseAccumulationUnit).RecordEventUnitName:"-") &vert;
                                                            @AppData.LangResource[AppData.LanguageID, 573] : @eventResults[i].Hour &vert;

                                                            @AppData.LangResource[AppData.LanguageID, 194] : @eventResults[i].eventResultDescription
                                                        </p>
                                                    </div>
                                                    <div class="col-lg-4 col-md-6 img-margin-next">
                                                        <!--img class="img-size-next" src="@("data:image/png;base64,"+eventResults[i].eventResultImageFile+"")" /-->
                                                        @if (!string.IsNullOrEmpty(eventResults[i].eventResultImageData))
                                                        {
                                                            <a href="@($"{config["nurl"]}{config["nurlFileRecordEvent"]}{eventResults[i].eventResultImageData}")" data-lightbox="gallery" data-title="@AppData.LangResource[AppData.LanguageID, 296]">
                                                                <img class="img-size-next" loading="lazy" src="@($"{config["nurl"]}{config["nurlFileRecordEvent"]}{eventResults[i].eventResultImageData}")" />
                                                            </a>
                                                        }
                                                        
                                                    </div>
                                                </div>
                                            </div>
                                        }

                                    }

                                </div>
                               @*  <a id="carouselExampleIndicators-prev" class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a id="carouselExampleIndicators-next" class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Next</span>
                                </a> *@
                            </div>
                        }

                    </div>
                </div>

            </div>
        </div>

    </div>
</div>

<!--ModalLoading-->
<BSModal class="row style-justify mt-5" @ref="Load" IsCentered="true" Size="Size.Small" IgnoreEscape="true" IgnoreClickOnBackdrop="true">
    <BSModalBody>
        <div class="text-center mt-3">
            <span class="spinner-border text-warning spinner-border-sm " role="status" aria-hidden="true"
                  style="font-size: 16pt; width: 36px; height: 36px; color: Gold " />
        </div>
        <div class="text-center pt-3" style=" font-size: 16pt">
            @AppData.LangResource[AppData.LanguageID, 325]
        </div>
    </BSModalBody>
</BSModal>